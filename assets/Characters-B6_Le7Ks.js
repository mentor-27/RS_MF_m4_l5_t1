import{j as e,L as p,i as f,r as o}from"./index-1TEcqwu3.js";import{u as S,a as C,S as N}from"./useQuery-BvPd5bh1.js";const k="_link_9te4i_1",v="_characterContainer_9te4i_11",I="_characterImageContainer_9te4i_51",b="_characterImage_9te4i_51",B="_characterInfoBlock_9te4i_77",R="_nameSign_9te4i_95",w="_speciesSign_9te4i_111",n={link:k,characterContainer:v,characterImageContainer:I,characterImage:b,characterInfoBlock:B,nameSign:R,speciesSign:w},g=({character:a,ref:s})=>e.jsx(p,{to:f.character(a.id.toString()),className:n.link,state:{character:a},children:e.jsxs("div",{ref:s,className:n.characterContainer,children:[e.jsx("div",{className:n.characterImageContainer,children:e.jsx("img",{className:n.characterImage,src:a.image,alt:a.name})}),e.jsxs("div",{className:n.characterInfoBlock,children:[e.jsx("span",{className:n.nameSign,children:a.name}),e.jsx("span",{className:n.speciesSign,children:a.species})]})]})}),y="_caption_4adbz_1",z="_container_4adbz_9",L="_characters_4adbz_69",l={caption:y,container:z,characters:L},F=()=>{const[a,s]=o.useState(1),{loading:t,error:_,data:d,hasMore:h}=S("/character",a),{dataArr:m,toggleSort:u}=C(d),c=o.useRef(null),x=o.useCallback(r=>{t||(c.current&&c.current.disconnect(),c.current=new IntersectionObserver(i=>{i[0].isIntersecting&&h&&s(j=>j+1)}),r&&c.current.observe(r))},[t,h]);return e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:l.caption,children:"Universe characters"}),e.jsxs("div",{className:l.container,children:[e.jsx(N,{onClick:u}),e.jsx("div",{className:l.characters,children:m.map((r,i)=>i===m.length-2?e.jsx(g,{ref:x,character:r},r.name):e.jsx(g,{character:r},r.id))}),t&&e.jsx("div",{children:"Loading..."}),_&&e.jsx("div",{children:"Something went wrong"})]})]})};export{F as default};
